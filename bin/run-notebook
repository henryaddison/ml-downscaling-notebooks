#! /usr/bin/env bash

set -euo pipefail

notebook_filepath=$1
parameters_filepath=$2

output_dirpath="$(dirname ${notebook_filepath})/output"
parameters=$(basename ${parameters_filepath} .yml)
output_filename="$(basename ${notebook_filepath} .ipynb)-${parameters}.ipynb"
output_filepath=${output_dirpath}/${output_filename}

mkdir -p ${output_dirpath}

papermill ${notebook_filepath} ${output_filepath} -f ${parameters_filepath}
